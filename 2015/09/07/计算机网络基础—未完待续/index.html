<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 计算机网络基础 · 返屋企的技术宅</title><meta name="description" content="非科班学生尝试恶补计算机网络基础，未完待续《计算机网络简明教程》

from 《计算机网络简明教程》 —— 谢希仁

ISP (Internet Service Provider)
可从英特网管理机构申请到成块的IP地址
同时拥有通信线路（大的ISP自己造，小的租）
“上网”指的是通过某个ISP接入到因特网。
IP地址管理机构不零售单个IP地址给个人用户，而是批发给ISP,由ISP再进行零售
NAP网络接入点：为了使不同层次ISP经营的网络能够互通
相隔较远的两台主机的通信可能需要经过多个ISP




ISP级别&lt;"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header style="background-image:url(/header-bg.jpg)"><a href="/" class="logo-link"><img src="/avatar.jpeg"></a><p class="info">zhangfengqi</p><p class="profession"><span>tobe 靠谱的 Front-End Developer</span></p><p class="motto">stay curious · stay hungry</p><nav><ul id="navigation"><li><a href="/archives">归档</a></li><li><a href="/about">关于我</a></li></ul></nav><ul class="sn sn-list iconfont"><li class="sn-list-item"><a href="http://weibo.com/jaredzfq" target="_blank" class="sn-list-link icon-weibo"></a></li><li class="sn-list-item"><a href="https://github.com/zfengqi" target="_blank" class="sn-list-link icon-github"></a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">计算机网络基础</h1><div class="post-meta"><div class="post-time">2015年09月07日</div></div><div class="post-content"><p>非科班学生尝试恶补计算机网络基础，未完待续《计算机网络简明教程》<br><a id="more"></a></p>
<blockquote>
<p><strong>from 《计算机网络简明教程》 —— 谢希仁</strong></p>
</blockquote>
<h2 id="ISP__28Internet_Service_Provider_29"><a href="#ISP__28Internet_Service_Provider_29" class="headerlink" title="ISP (Internet Service Provider)"></a>ISP (Internet Service Provider)</h2><ol>
<li>可从英特网管理机构申请到成块的IP地址</li>
<li>同时拥有通信线路（大的ISP自己造，小的租）</li>
<li>“上网”指的是通过某个ISP接入到因特网。</li>
<li>IP地址管理机构不零售单个IP地址给个人用户，而是批发给ISP,由ISP再进行零售</li>
<li><strong>NAP网络接入点</strong>：为了使不同层次ISP经营的网络能够互通</li>
<li>相隔较远的两台主机的通信可能需要经过多个ISP</li>
</ol>
<table>
<thead>
<tr>
<th>ISP级别</th>
<th>作用</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>第一层ISP</td>
<td>最高级别，一般覆盖国家</td>
<td>拥有高速主干网</td>
</tr>
<tr>
<td>第二层ISP</td>
<td>包括一些大公司</td>
<td>都是第一层ISP的用户</td>
</tr>
<tr>
<td>本地ISP（第三层）</td>
<td>包括校园网、企业网和拨号上网的用户</td>
<td>只拥有本地网络，是第二层ISP的用户</td>
</tr>
</tbody>
</table>
<h2 id="u56E0_u7279_u7F51_u7684_u7EC4_u6210"><a href="#u56E0_u7279_u7F51_u7684_u7EC4_u6210" class="headerlink" title="因特网的组成"></a>因特网的组成</h2><ol>
<li>边缘部分<ul>
<li>连接在因特网上的所有主机（又称端系统），这些主机可以是pad、大型计算机，也可以是ISP</li>
<li>边缘部分利用核心部分所提供的服务，使主机之间能够互相通信。</li>
<li>端系统的通信方式： 客户端-服务器方式（C/S，注B/S是其一种特例）和对等方式（P2P）</li>
</ul>
</li>
<li>核心部分<ul>
<li>向网络边缘提供连通性，核心主干是路由器</li>
<li>路由器是实现分组（包）交换的关键构件，其任务是转发收到的分组。</li>
<li>路由器不属于主机，主机的用途是为用户进行信息处理的，并且可以和其他主机通过网络交换信息。</li>
<li>分组交换采用 <strong>存储转发</strong> 技术，要发送的整块数据成为一个 <strong>报文</strong>，发送报文之前，先把较长的报文划分成为一个个更小的等长数据段，在每个数据段前面，加上一些由必要的控制信息组成的 <strong>首部</strong> 后，构成一个 <strong>分组</strong>，也成为 <strong>包(packet)</strong></li>
<li>分组交换与电路交换相比的优点</li>
</ul>
</li>
</ol>
<h2 id="u4EC0_u4E48_u662F_u5E26_u5BBD"><a href="#u4EC0_u4E48_u662F_u5E26_u5BBD" class="headerlink" title="什么是带宽"></a>什么是带宽</h2><ul>
<li>用来表示网络的通信线路所能传送数据的能力</li>
<li>单位时间内从网络的某一点到另一点所能通过的 <strong>“最高数据率”</strong></li>
<li>单位为 b/s … Gb/s</li>
</ul>
<h2 id="u4E94_u5C42_u534F_u8BAE_u4F53_u7CFB_u7ED3_u6784"><a href="#u4E94_u5C42_u534F_u8BAE_u4F53_u7CFB_u7ED3_u6784" class="headerlink" title="五层协议体系结构"></a>五层协议体系结构</h2><h3 id="1-__u5E94_u7528_u5C42"><a href="#1-__u5E94_u7528_u5C42" class="headerlink" title="1. 应用层"></a>1. 应用层</h3><ul>
<li>直接为用户的应用进程（即正在运行的软件程序）提供服务。</li>
<li>包括HTTP SMTP FTP…</li>
</ul>
<h3 id="2-__u4F20_u8F93_u5C42"><a href="#2-__u4F20_u8F93_u5C42" class="headerlink" title="2. 传输层"></a>2. 传输层</h3><ul>
<li>负责向两台主机中的进程之间（端对端）的提供可靠报文传输和错误恢复。</li>
<li>复用：多个应用层进程可同时使用下面传输层的服务；</li>
<li>分用：传输层把收到的信息分别交付给上面应用层中相应的进程。</li>
<li><strong>TCP：</strong>面向连接，数据传输的单位是<strong>报文段(segment)</strong></li>
<li><strong>UDP：</strong>无连接，传输单位为<strong>用户数据报</strong>，尽最大努力交付</li>
</ul>
<h3 id="3-__u7F51_u7EDC_u5C42_28_u4E5F_u79F0_u7F51_u9645_u5C42_IP_u5C42_29"><a href="#3-__u7F51_u7EDC_u5C42_28_u4E5F_u79F0_u7F51_u9645_u5C42_IP_u5C42_29" class="headerlink" title="3. 网络层(也称网际层 IP层)"></a>3. 网络层(也称网际层 IP层)</h3><ul>
<li>负责为不同的主机之间提供通信服务，注意只精确到主机之间而非指定进程</li>
<li>把传输层产生的报文段或用户数据报封装成分组或包进行传输。也称为IP数据报</li>
<li>另一个任务是：使主机传输层所传下来的包，能够通过网络中的路由器找到合适的路由，最后到达目的主机。即寻路。</li>
</ul>
<h4 id="u7F51_u7EDC_u5C42_u4E0D_u4FDD_u8BC1_u670D_u52A1_u8D28_u91CF"><a href="#u7F51_u7EDC_u5C42_u4E0D_u4FDD_u8BC1_u670D_u52A1_u8D28_u91CF" class="headerlink" title="网络层不保证服务质量"></a>网络层不保证服务质量</h4><ul>
<li>向上只提供简单灵活、无连接的、尽最大努力交付的数据报服务</li>
<li>当主机中的进程之间的通信需要是可靠的时，就由主机中的传输层负责提供可靠传输</li>
</ul>
<h4 id="IP_u5730_u5740_28IPv4_29"><a href="#IP_u5730_u5740_28IPv4_29" class="headerlink" title="IP地址(IPv4)"></a>IP地址(IPv4)</h4><p>最初使用分类的IP地址，先已普遍采用无分类编址方法</p>
<p><strong>分类地址：</strong> 网络号 + 主机号 共32位</p>
<table>
<thead>
<tr>
<th>地址类别</th>
<th>网络号字段</th>
<th>主机号字段</th>
</tr>
</thead>
<tbody>
<tr>
<td>A类地址</td>
<td>0 + 网络号（共8位 1字节）</td>
<td>主机号(共24位)</td>
</tr>
<tr>
<td>B类地址</td>
<td>10 + 网络号（共16位 2字节）</td>
<td>主机号(共16位)</td>
</tr>
<tr>
<td>C类地址</td>
<td>110 + 网络号（共24位 3字节）</td>
<td>主机号(共8位)</td>
</tr>
<tr>
<td>D类地址</td>
<td>1110</td>
<td>多播地址</td>
</tr>
<tr>
<td>E类地址</td>
<td>1111</td>
<td>保留位今后使用</td>
</tr>
</tbody>
</table>
<p><strong>点分十进制记法：</strong> 如128.11.3.31</p>
<ol>
<li>每8位用其等效的十进制数表示，并在这些数之间加一个点。</li>
<li>第一个十进制数：0~127是A类； 128~191是B类；192~223C类； 224~239D类； 240~255E类</li>
</ol>
<p><strong>IP地址与MAC地址</strong></p>
<ul>
<li>IP地址：并不仅仅指明一台主机，还指明了主机所连接到的网络。</li>
<li>MAC地址：仅仅指明一台主机，与该主机所连接的网络毫无关系。</li>
</ul>
<h4 id="ARP_u662F_u5730_u5740_u89E3_u6790_u534F_u8BAE_uFF0C_u7B80_u5355_u8BED_u8A00_u89E3_u91CA_u4E00_u4E0B_u5DE5_u4F5C_u539F_u7406_u3002"><a href="#ARP_u662F_u5730_u5740_u89E3_u6790_u534F_u8BAE_uFF0C_u7B80_u5355_u8BED_u8A00_u89E3_u91CA_u4E00_u4E0B_u5DE5_u4F5C_u539F_u7406_u3002" class="headerlink" title="ARP是地址解析协议，简单语言解释一下工作原理。"></a>ARP是地址解析协议，简单语言解释一下工作原理。</h4><ol>
<li>首先，每个主机都会在自己的ARP缓冲区中建立一个ARP列表，以表示IP地址和MAC地址之间的对应关系。</li>
<li>当源主机要发送数据时，首先检查ARP列表中是否有对应IP地址的目的主机的MAC地址，如果有，则直接发送数据，如果没有，就向本网段的所有主机发送ARP数据包，该数据包包括的内容有：源主机 IP地址，源主机MAC地址，目的主机的IP 地址。</li>
<li>当本网络的所有主机收到该ARP数据包时，首先检查数据包中的IP地址是否是自己的IP地址，如果不是，则忽略该数据包，如果是，则首先从数据包中取出源主机的IP和MAC地址写入到ARP列表中，如果已经存在，则覆盖，然后将自己的MAC地址写入ARP响应包中，告诉源主机自己是它想要找的MAC地址。</li>
<li>源主机收到ARP响应包后。将目的主机的IP和MAC地址写入ARP列表，并利用此信息发送数据。如果源主机一直没有收到ARP响应数据包，表示ARP查询失败。</li>
</ol>
<p>广播发送ARP请求，单播发送ARP响应。</p>
<h4 id="IP_u5C42_u8F6C_u53D1_u5206_u7EC4_u7684_u6D41_u7A0B"><a href="#IP_u5C42_u8F6C_u53D1_u5206_u7EC4_u7684_u6D41_u7A0B" class="headerlink" title="IP层转发分组的流程"></a>IP层转发分组的流程</h4><h4 id="u865A_u62DF_u4E13_u7528_u7F51_VPN"><a href="#u865A_u62DF_u4E13_u7528_u7F51_VPN" class="headerlink" title="虚拟专用网 VPN"></a>虚拟专用网 VPN</h4><p><strong>背景</strong></p>
<ol>
<li>IP地址紧缺，公司或机构所申请到的IP地址数远小于所拥有的主机数；</li>
<li>一个机构内并不需要把所有主机都接入到外部因特网，很多主机只需要和公司内部其他主机通信</li>
<li>因此可以让这些主机使用仅在公司内部有效的IP地址（本地地址），而不需要全球地址。</li>
</ol>
<p>RFC1918指明了一些<strong>专用地址(可重用地址)</strong>：这些地址只能用于一个机构的内部通信，而不能用于和因特网上的主机通信。<br><strong>在因特网中的所有路由器，对目的地址是专用地址的数据报一律不进行转发</strong>，避免自行分配的本地地址和全球地址相冲突。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10.0.0.0 ~ 10.255.255.255&#10;172.16.0.0 ~ 172.31.255.255&#10;192.168.0.0 ~ 192.168.255.255</span><br></pre></td></tr></table></figure>
<p>分布在不同地点的专用网若需要进行通信，可使用IP隧道技术实现(P112)</p>
<h3 id="4-__u6570_u636E_u94FE_u8DEF_u5C42"><a href="#4-__u6570_u636E_u94FE_u8DEF_u5C42" class="headerlink" title="4. 数据链路层"></a>4. 数据链路层</h3><ul>
<li>将网络层交下来的IP数据报组装成 <strong>帧(frame)</strong>(添加首部和尾部)，在两个相邻节点间的链路上“透明”地传送帧中的数据。</li>
<li><strong>每一帧</strong> 包括数据和必要的控制信息（如同步信息、地址信息、差错控制等），典型帧长为几百到一千多字节</li>
<li>控制信息使接收端能够知道一个帧从哪个bit开始和到哪个bit结束。这样链路层在收到一个帧后，就可以从中提取出数据部分，上交给网络层。A</li>
<li>控制信息还使接收端能够检测到所收到的帧中有无错误，并且可以纠正。</li>
</ul>
<hr>
<h4 id="u94FE_u8DEF_u548C_u6570_u636E_u94FE_u8DEF_u5E76_u4E0D_u662F_u4E00_u56DE_u4E8B"><a href="#u94FE_u8DEF_u548C_u6570_u636E_u94FE_u8DEF_u5E76_u4E0D_u662F_u4E00_u56DE_u4E8B" class="headerlink" title="链路和数据链路并不是一回事"></a>链路和数据链路并不是一回事</h4><p><strong>链路：</strong> 从一个结点到相邻结点的一段物理线路，而中间没有任何其他的交换结点。</p>
<p><strong>数据链路：</strong> 链路 + 实现必要通信协议的硬件和软件（用来控制数据的传输），一般使用网络适配器来实现这些协议的硬件和软件。</p>
<p><strong>网络适配器（简称网卡）：</strong> 拨号上网 —— 拨号适配器； 以太网上网 —— 局域网适配器</p>
<h4 id="u900F_u660E_u4F20_u8F93"><a href="#u900F_u660E_u4F20_u8F93" class="headerlink" title="透明传输"></a>透明传输</h4><p>如果数据链路层协议允许所传送的数据可具有任意形式的比特组合（即使出现了和帧首部或帧尾部标记完全一样的比特组合，协议也会采取适当的措施来处理）。<br>这样的传输称为透明传输。</p>
<h3 id="5-__u7269_u7406_u5C42"><a href="#5-__u7269_u7406_u5C42" class="headerlink" title="5. 物理层"></a>5. 物理层</h3><ul>
<li>任务是传送比特流</li>
<li>需要考虑的是用多大电压代表1或0，以及接收方如何识别出发送方所发送的bit</li>
<li><strong>注意：</strong> 传递信息所利用的物理媒介，如光缆、电缆、无线信道等，并不包含在物理层协议当中，而是在物理层协议的下面。所以也可以将物理媒介当做第0层。</li>
</ul>
</div><div class="update-time">更新于：2016年01月10日</div></article></div><div class="side-bar"><div class="widget"><h3 class="widget-title">分类</h3><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CSS/">CSS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/基础/">基础</a></li></ul></div><div class="widget"><h3 class="widget-title">标签</h3><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/移动端/">移动端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计算机网络/">计算机网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/面试/">面试</a></li></ul></div></div></section><footer><div class="paginator"><a href="/2015/09/25/javascript/一道面试题/problem/" class="prev">上一篇</a><a href="/2015/09/05/数据库基础/" class="next">下一篇</a></div><div class="copyright"><p>© 2015-2016<span>zhangfengqi.xyz</span></p><span class="theme">Theme based on <a href="https://github.com/pinggod/hexo-theme-apollo" class="theme-url">appolo</a></span><span class="hexo">Powered by <a href="https://hexo.io/">Hexo</a></span></div></footer><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>